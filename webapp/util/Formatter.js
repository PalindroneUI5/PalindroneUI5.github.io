/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("testnamespace.util.Formatter");testnamespace.util.Formatter={init:function(m){this.jsonModel=new sap.ui.model.json.JSONModel();this.oPrioritySet=[];this.oCategorySet=[];this.oSecurityCategorySet=[];this.oStatusSet=[];this.oSystemTypeSet=[];this.oSystemRoleSet=[];this.oSystemPrioritySet=[];this.oCorrectionTypeSet=[];this.oKernelSet=[];this.oReleaseSet=[];this.oNoteTypeSet=[];var t=this;var b=[];b.push(m.createBatchOperation("/PrioritySet","GET"));b.push(m.createBatchOperation("/CategorySet","GET"));b.push(m.createBatchOperation("/SecurityCategorySet","GET"));b.push(m.createBatchOperation("/StatusSet","GET"));b.push(m.createBatchOperation("/SystemStatisticsSet","GET"));b.push(m.createBatchOperation("/SystemRoleSet","GET"));b.push(m.createBatchOperation("/SystemPrioritySet","GET"));b.push(m.createBatchOperation("/CorrectionTypeSet","GET"));b.push(m.createBatchOperation("/KernelSet","GET"));b.push(m.createBatchOperation("/ReleaseSet","GET"));b.push(m.createBatchOperation("/NoteTypeSet","GET"));b.push(m.createBatchOperation("/getSAPNoteUrl","GET"));b.push(m.createBatchOperation("/getPatchInfoUrl","GET"));b.push(m.createBatchOperation("/getUserStatusPath","GET"));m.addBatchReadOperations(b);m.setUseBatch(true);m.submitBatch(function(r){var a=r.__batchResponses;t.oPrioritySet=a[0].data.results;t.oCategorySet=a[1].data.results;t.oSecurityCategorySet=a[2].data.results;t.oStatusSet=a[3].data.results;t.oSystemTypeSet=a[4].data.results;t.oSystemRoleSet=a[5].data.results;t.oSystemPrioritySet=a[6].data.results;t.oCorrectionTypeSet=a[7].data.results;t.oKernelSet=a[8].data.results;t.oReleaseSet=a[9].data.results;t.oNoteTypeSet=a[10].data.results;t.sapNoteUrl=a[11].data.getSAPNoteUrl.Url;t.patchInfoUrl=a[12].data.getPatchInfoUrl.Url;t.userStatusPath=a[13].data.getUserStatusPath.Url;var s=t.oSystemTypeSet;var c=[];var d=[];var i,j;for(i=0;i<s.length;i++){var e=c.indexOf(s[i].SystemType);if(e===-1){c[c.length]=s[i].SystemType;}}var f={text:testnamespace.util.Util.getResourceBundle().getText("XTIT_ALL"),key:"*",count:s.length};d[d.length]=f;for(i=0;i<c.length;i++){var g=0;for(j=0;j<s.length;j++){if(c[i]===s[j].SystemType){g=g+1;}}f={text:c[i],key:c[i],count:g};d[d.length]=f;}t.jsonModel.setData({PrioritySet:t.oPrioritySet,CategorySet:t.oCategorySet,SecurityCategorySet:t.oSecurityCategorySet,StatusSet:t.oStatusSet,KernelSet:t.oKernelSet,ReleaseSet:t.oReleaseSet,SystemStatisticsSet:t.oSystemTypeSet,NoteTypeSet:t.oNoteTypeSet,CorrectionTypeSet:t.oCorrectionTypeSet,SystemTypeCount:d});},function(){},false);this.oModel=m;this.jamModel=new sap.ui.model.odata.ODataModel("/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData",true);this.isJamSupported=true;this.jamModel.attachMetadataFailed(function(){t.isJamSupported=false;});this.picBuffer=[];},getConcatedString:function(p,a){return p+"-"+a;},getModel:function(){return this.oModel;},getAttributesText:function(a,i){var k=testnamespace.util.Formatter.getKernelText(a);var r=testnamespace.util.Formatter.getReleaseText(i);return k+","+r;},getCommentLongText:function(l){if(sap.ui.Device.system.phone){return"";}else{return l;}},showMessage:function(m){sap.m.MessageToast.show(m);},getSystemTypeSet:function(){return this.oSystemTypeSet;},getReleaseDate:function(r){if(r){return r.toLocaleDateString();}return r;},getDateTimeString:function(r){if(r){return r.toLocaleDateString()+" "+r.toLocaleTimeString();}return r;},getPicture:function(i){if(i===""){return"";}var u="";var b=false;var f=testnamespace.util.Formatter;if(f.isJamSupported===false){return"";}$.each(f.picBuffer,function(a,v){if(v.id===i){u=v.url;b=true;}});if(b===true){return u;}if(u===""){var s="/Members_Autocomplete?Query=%27"+i+"%27&$expand=ThumbnailImage";f.jamModel.read(s,null,null,false,function(d){var a=d.results[0].ThumbnailImage.__metadata.media_src;u="/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/"+a;},function(){});var p={id:i,url:u};f.picBuffer.push(p);}return u;},getNoteUrl:function(n){var u=testnamespace.util.Formatter.sapNoteUrl;return u.replace("{1}",n);},getPatchInfoUrl:function(o){var u=testnamespace.util.Formatter.patchInfoUrl;return u.replace("{1}",o);},getKernelText:function(k){return testnamespace.util.Formatter._getKernelText(k);},_getKernelText:function(k){for(var i=0;i<this.oKernelSet.length;i++){if(this.oKernelSet[i].Id===k){return this.oKernelSet[i].ShortText;}}return k;},getReleaseText:function(r){return testnamespace.util.Formatter._getReleaseText(r);},_getReleaseText:function(r){for(var i=0;i<this.oReleaseSet.length;i++){if(this.oReleaseSet[i].Id===r){return this.oReleaseSet[i].ShortText;}}return r;},getPriorityText:function(p){return testnamespace.util.Formatter._getPriorityText(p);},_getPriorityText:function(p){for(var i=0;i<this.oPrioritySet.length;i++){if(this.oPrioritySet[i].Key===p){return p+" - "+this.oPrioritySet[i].ShortText;}}return p;},getCategoryText:function(c){return testnamespace.util.Formatter._getCategoryText(c);},_getCategoryText:function(c){for(var i=0;i<this.oCategorySet.length;i++){if(this.oCategorySet[i].Key===c){return c+" - "+this.oCategorySet[i].ShortText;}}return c;},getSecurityCategoryText:function(c){return testnamespace.util.Formatter._getSecurityCategoryText(c);},_getSecurityCategoryText:function(c){for(var i=0;i<this.oSecurityCategorySet.length;i++){if(this.oSecurityCategorySet[i].Key===c){return c+" - "+this.oSecurityCategorySet[i].ShortText;}}return c;},getStatusText:function(s){return testnamespace.util.Formatter._getStatusText(s);},_getStatusText:function(s){for(var i=0;i<this.oStatusSet.length;i++){if(this.oStatusSet[i].Key===s){return this.oStatusSet[i].ShortText;}}return s;},getSystemRoleText:function(I){return testnamespace.util.Formatter._getSystemRoleText(I);},_getSystemRoleText:function(I){for(var i=0;i<this.oSystemRoleSet.length;i++){if(this.oSystemRoleSet[i].Key===I){return this.oSystemRoleSet[i].ShortText;}}return I;},getSystemPriorityText:function(I){return testnamespace.util.Formatter._getSystemPriorityText(I);},_getSystemPriorityText:function(I){for(var i=0;i<this.oSystemPrioritySet.length;i++){if(this.oSystemPrioritySet[i].Key===I){return this.oSystemPrioritySet[i].ShortText;}}return I;},getCorrectionText:function(c){if(c===null){return"";}return testnamespace.util.Formatter._getCorrectionText(c);},_getCorrectionText:function(c){var t="";for(var i=0;i<this.oCorrectionTypeSet.length;i++){if(c.indexOf(this.oCorrectionTypeSet[i].Key)!==-1){if(t.length===0){t=t+this.oCorrectionTypeSet[i].ShortText;}else{t=t+","+this.oCorrectionTypeSet[i].ShortText;}}}return t;},trimNumberLeadingZero:function(t){if(t===null){return"";}var a=t.toString();while(a.substr(0,1)==="0"&&a!==""){a=a.substr(1);}return a;},isIntegratedAppBtnVisible:function(d){if(d.isPhone||d.isTouch){return false;}return true;},getSystemFavoriteValue:function(i){if(i==="T"){return"sap-icon://favorite";}return"sap-icon://unfavorite";},getCommentStatus:function(s,a){return testnamespace.util.Formatter._getCommentStatus(s,a);},_getCommentStatus:function(s,a){if(s===a){return"";}var b,c;for(var i=0;i<this.oStatusSet.length;i++){if(this.oStatusSet[i].Key===s){b=this.oStatusSet[i].ShortText;}if(this.oStatusSet[i].Key===a){c=this.oStatusSet[i].ShortText;}}var d=testnamespace.util.Util.getResourceBundle();var t=d.getText("TEXT_STATUS_FROM_TO");t=t.replace("{1}",b);t=t.replace("{2}",c);return t;}};